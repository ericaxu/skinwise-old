@(state: src.controllers.util.ResponseState, ingredient: src.models.data.Ingredient)

@import src.util.Util;
@import org.apache.commons.lang3.text.WordUtils;
@template(ingredient.getDisplayName + " - Skin Wise", state) {

    <link rel="stylesheet" media="screen" href='@routes.Assets.at("/public", "stylesheets/browse.css")'>

} {

    <div class="ingredient_detail">

        <div class="section">
            <h1 class="name">@ingredient.getDisplayName</h1>
            @if(ingredient.getAliasesString.size > 0) {
                <div class="alternate_names">
                    Also known as
                    @Util.joinString(", ", ingredient.getAliasesString.map { WordUtils.capitalizeFully(_) }
                            .filter { _.toLowerCase != ingredient.getName.toLowerCase })
                </div>
            }
        </div>

        <div class="functions section">
            <h3>What It Does</h3>
            <p>@for(f <- ingredient.getFunctions) {
                <a class="function neutral" data-id="@f.getId">@WordUtils.capitalizeFully(f.getName)</a>
            }
            </p>
        </div>

        <div class="description section">
            <h3>What It Is</h3>
            <p>@ingredient.getDescription</p>
        </div>

        <div class="contained_products section">
            <h3>Products with @ingredient.getDisplayName</h3>

            <div class="product_filter filter_area">
                <div class="result_summary"></div>

                <div class="filter_toggle_link open">Refine results <span class="chevron top"></span></div>

                <div class="filter_container">
                    <div class="filter_group">
                        <div class="filter_section">
                            <div class="filter_header">
                                <h3>Type</h3>
                                <span class="open_add_filter_popup" data-type="type" data-filter-key="type">+</span>
                            </div>
                            <div class="type_filters"></div>
                        </div>
                    </div>

                    <div class="filter_group">
                        <div class="filter_section">
                            <div class="filter_header">
                                <h3>From Brand</h3>
                                <span class="open_add_filter_popup" data-type="brand" data-filter-key="brand">+</span>
                            </div>
                            <div class="brand_filters"></div>
                        </div>
                        <div class="filter_section">
                            <div class="filter_header">
                                <h3>Not From Brand</h3>
                                <span class="open_add_filter_popup" data-type="brand" data-filter-key="neg_brand">+</span>
                            </div>
                            <div class="neg_brand_filters"></div>
                        </div>
                    </div>

                    <div class="filter_group">
                        <div class="filter_section">
                            <div class="filter_header">
                                <h3>Contains</h3>
                                <span class="open_add_filter_popup" data-type="ingredient" data-filter-key="ingredient">
                                    +</span>
                            </div>
                            <div class="ingredient_filters"></div>
                        </div>
                        <div class="filter_section">
                            <div class="filter_header">
                                <h3>Does not contain</h3>
                                <span class="open_add_filter_popup" data-type="ingredient" data-filter-key="neg_ingredient">
                                    +</span>
                            </div>
                            <div class="neg_ingredient_filters"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="products_list">
                <ul class="horizontal">
                </ul>
                <div class="end_of_results">No more results.</div>
                <div id="loading_spinner"></div>
            </div>

            <div id="back_to_top">
                <span class="chevron top"></span>
                Back to Top
            </div>
        </div>
    </div>

} {

    <script src='@routes.Assets.at("/public", "javascripts/vendor/spin-min.js")'></script>
    <script src='@routes.Assets.at("/public", "javascripts/browse.js")'></script>
    <script>
    SW.CUR_INGREDIENT = @ingredient.getId ;
    initBrowse ( 'product' ) ;
    </script>

}
